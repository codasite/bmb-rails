{"version":3,"file":"src_components_settings_Settings_tsx.js","mappings":"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","sources":["webpack://react-bracket-builder/./src/api/bracketApi.ts","webpack://react-bracket-builder/./src/components/bracket_builder/Bracket.tsx","webpack://react-bracket-builder/./src/components/settings/Settings.tsx","webpack://react-bracket-builder/./src/enum.ts"],"sourcesContent":["import { Nullable } from \"../types\";\nimport { WildcardPlacement } from '../enum';\n\ninterface Team {\n\tname: string;\n\tseed: Nullable<number>;\n}\n\nexport interface TeamRes extends Team {\n\tid: number;\n}\n\nexport interface TeamReq extends Team { }\n\ninterface Match {\n\tindex: number;\n}\n\nexport interface MatchRes extends Match {\n\tid: number;\n\tteam1: Nullable<TeamRes>;\n\tteam2: Nullable<TeamRes>;\n\tresult: Nullable<TeamRes>;\n}\n\nexport interface MatchReq extends Match {\n\tteam1: Nullable<TeamReq>;\n\tteam2: Nullable<TeamReq>;\n\tresult: Nullable<TeamReq>;\n}\n\ninterface Round {\n\tname: string;\n\tdepth: number;\n}\n\nexport interface RoundRes extends Round {\n\tid: number;\n\tmatches: Nullable<MatchRes>[];\n}\n\nexport interface RoundReq extends Round {\n\tmatches: Nullable<MatchReq>[];\n}\n\ninterface Bracket {\n\tname: string;\n\tactive: boolean;\n\tnumRounds: number;\n\tnumWildcards: number;\n\twildcardPlacement: WildcardPlacement;\n}\n\ninterface phpDate {\n\tdate: string;\n\ttimezone_type: number;\n\ttimezone: string;\n}\n\nexport interface BracketRes extends Bracket {\n\tid: number;\n\tcreatedAt: phpDate;\n\tnumSubmissions: number;\n\trounds: RoundRes[];\n}\n\nexport interface BracketReq extends Bracket {\n\trounds: RoundReq[];\n}\n\n\nclass BracketApi {\n\tprivate baseUrl: string;\n\tprivate bracketPath: string = 'brackets';\n\n\tconstructor() {\n\t\t// @ts-ignore\n\t\tthis.baseUrl = wpbb_ajax_obj.rest_url;\n\t}\n\n\tasync getBrackets(): Promise<BracketRes[]> {\n\t\tconst res = await this.performRequest(this.bracketPath, 'GET');\n\t\tif (res.status !== 200) {\n\t\t\tthrow new Error('Failed to get brackets');\n\t\t}\n\t\treturn camelCaseKeys(await res.json());\n\t}\n\n\tasync getBracket(id: number): Promise<BracketRes> {\n\t\tconst res = await this.performRequest(`${this.bracketPath}/${id}`, 'GET');\n\t\tif (res.status !== 200) {\n\t\t\tthrow new Error('Failed to get bracket');\n\t\t}\n\t\treturn camelCaseKeys(await res.json());\n\t}\n\n\tasync createBracket(bracket: BracketReq): Promise<BracketRes> {\n\t\tconst res = await this.performRequest(this.bracketPath, 'POST', bracket);\n\t\tif (res.status !== 201) {\n\t\t\tthrow new Error('Failed to create bracket');\n\t\t}\n\t\treturn camelCaseKeys(await res.json());\n\t}\n\n\tasync deleteBracket(id: number): Promise<void> {\n\t\tconst res = await this.performRequest(`${this.bracketPath}/${id}`, 'DELETE');\n\t\tconsole.log(res)\n\t\tif (res.status !== 204) {\n\t\t\tthrow new Error('Failed to delete bracket');\n\t\t}\n\t}\n\n\tasync setActive(id: number, active: boolean): Promise<boolean> {\n\t\tconst path = `${this.bracketPath}/${id}/${active ? 'activate' : 'deactivate'}`\n\t\tconst res = await this.performRequest(path, 'POST');\n\t\tif (res.status !== 200) {\n\t\t\tthrow new Error('Failed to set active');\n\t\t}\n\t\tconst activated = await res.json();\n\t\treturn activated;\n\t}\n\n\n\tasync performRequest(path: string, method: string, body: any = {}) {\n\t\tconst request = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t}\n\t\tif (method !== 'GET') {\n\t\t\trequest['body'] = JSON.stringify(snakeCaseKeys(body));\n\t\t}\n\n\t\treturn await fetch(`${this.baseUrl}${path}`, request);\n\t}\n\n}\n\n// Utility function to convert snake_case to camelCase\nfunction toCamelCase(str: string): string {\n\treturn str.replace(/([-_][a-z])/g, (group) =>\n\t\tgroup.toUpperCase().replace('-', '').replace('_', '')\n\t);\n}\n\n// Recursive function to convert object keys to camelCase\nfunction camelCaseKeys(obj: any): any {\n\tif (Array.isArray(obj)) {\n\t\treturn obj.map((value) => camelCaseKeys(value));\n\t} else if (typeof obj === 'object' && obj !== null) {\n\t\treturn Object.entries(obj).reduce((accumulator: any, [key, value]) => {\n\t\t\taccumulator[toCamelCase(key)] = camelCaseKeys(value);\n\t\t\treturn accumulator;\n\t\t}, {});\n\t}\n\treturn obj;\n}\n\nfunction camelCaseToSnakeCase(str: string): string {\n\treturn str.replace(/[A-Z]/g, (match) => `_${match.toLowerCase()}`);\n}\n\n// Recursive function to convert object keys to snake_case\nfunction snakeCaseKeys(obj: any): any {\n\tif (Array.isArray(obj)) {\n\t\treturn obj.map((value) => snakeCaseKeys(value));\n\t} else if (typeof obj === 'object' && obj !== null) {\n\t\treturn Object.entries(obj).reduce((accumulator: any, [key, value]) => {\n\t\t\taccumulator[camelCaseToSnakeCase(key)] = snakeCaseKeys(value);\n\t\t\treturn accumulator;\n\t\t}, {});\n\t}\n\treturn obj;\n}\n\nexport const bracketApi = new BracketApi();","import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, InputGroup } from 'react-bootstrap';\nimport { Modal } from 'react-bootstrap';\nimport { Form } from 'react-bootstrap';\nimport { bracketApi } from '../../api/bracketApi';\nimport { Nullable } from '../../types';\nimport { BracketRes, BracketReq, RoundReq, MatchReq, TeamReq } from '../../api/bracketApi';\nimport { WildcardPlacement } from '../../enum';\n\n\n// Direction enum\nenum Direction {\n\tTopLeft = 0,\n\tTopRight = 1,\n\tBottomLeft = 2,\n\tBottomRight = 3,\n}\n\nclass Team {\n\tname: string;\n\tseed: Nullable<number> = null;\n\t// constructor(id: number, name: string) {\n\t// \tthis.id = id;\n\t// \tthis.name = name;\n\t// }\n\tconstructor(name: string) {\n\t\tthis.name = name;\n\t}\n\n\tclone(): Team {\n\t\treturn new Team(this.name);\n\t}\n\n\ttoRequest(): TeamReq {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tseed: this.seed,\n\t\t}\n\t}\n}\n\n\nclass MatchNode {\n\tteam1: Nullable<Team> = null;\n\tteam2: Nullable<Team> = null;\n\tresult: Nullable<Team> = null;\n\tleft: Nullable<MatchNode> = null;\n\tright: Nullable<MatchNode> = null;\n\tparent: Nullable<MatchNode> = null;\n\tdepth: number;\n\n\tconstructor(parent: Nullable<MatchNode>, depth: number) {\n\t\tthis.depth = depth;\n\t\tthis.parent = parent;\n\t}\n\n\tclone(): MatchNode {\n\t\tconst match = this;\n\t\tconst clone = new MatchNode(null, match.depth);\n\n\t\tclone.team1 = match.team1 ? match.team1.clone() : null;\n\t\tclone.team2 = match.team2 ? match.team2.clone() : null;\n\n\t\tif (match.result) {\n\t\t\tif (match.result === match.team1) {\n\t\t\t\tclone.result = clone.team1;\n\t\t\t} else if (match.result === match.team2) {\n\t\t\t\tclone.result = clone.team2;\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n\ttoRequest(index: number): MatchReq {\n\t\tconst match = this;\n\t\treturn {\n\t\t\tindex: index,\n\t\t\tteam1: match.team1 ? match.team1.toRequest() : null,\n\t\t\tteam2: match.team2 ? match.team2.toRequest() : null,\n\t\t\tresult: match.result ? match.result.toRequest() : null,\n\t\t}\n\t}\n\n}\n\nclass Round {\n\tid: number;\n\tname: string;\n\tdepth: number;\n\tmatches: Array<Nullable<MatchNode>>;\n\n\tconstructor(id: number, name: string, depth: number,) {\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.depth = depth;\n\t\t// this.matches = [];\n\t}\n\n\ttoRequest(): RoundReq {\n\t\tconst round = this;\n\t\tconst matches = round.matches.map((match, i) => {\n\t\t\tif (match === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn match.toRequest(i);\n\t\t});\n\t\treturn {\n\t\t\tname: round.name,\n\t\t\tdepth: round.depth,\n\t\t\tmatches: matches,\n\t\t}\n\t}\n}\n\nclass WildcardRange {\n\tconstructor(public min: number, public max: number) { }\n\n\ttoString(): string {\n\t\treturn `${this.min}-${this.max}`;\n\t}\n}\n\nclass MatchTree {\n\troot: MatchNode | null\n\trounds: Round[]\n\t// numRounds: number\n\t// numWildcards: number\n\t// wildcardsPlacement: WildcardPlacement\n\n\t// constructor(numRounds: number, numWildcards: number, wildcardsPlacement: WildcardPlacement) {\n\t// \tthis.rounds = this.buildRounds(numRounds, numWildcards, wildcardsPlacement)\n\t// \tthis.numRounds = numRounds\n\t// \tthis.numWildcards = numWildcards\n\t// \tthis.wildcardsPlacement = wildcardsPlacement\n\t// }\n\tstatic fromOptions(numRounds: number, numWildcards: number, wildcardPlacement: WildcardPlacement): MatchTree {\n\t\tconst tree = new MatchTree()\n\t\ttree.rounds = this.buildRounds(numRounds, numWildcards, wildcardPlacement)\n\t\treturn tree\n\t}\n\n\tstatic buildRounds(numRounds: number, numWildcards: number, wildcardPlacement: WildcardPlacement): Round[] {\n\t\t// The number of matches in a round is equal to 2^depth unless it's the first round\n\t\t// and there are wildcards. In that case, the number of matches equals the number of wildcards\n\t\tconst rootMatch = new MatchNode(null, 0)\n\t\tconst finalRound = new Round(1, `Round ${numRounds}`, 0)\n\t\tfinalRound.matches = [rootMatch]\n\t\tconst rounds = [finalRound]\n\n\t\tfor (let i = 1; i < numRounds; i++) {\n\n\t\t\tlet ranges: WildcardRange[] = []\n\n\t\t\tif (i === numRounds - 1 && numWildcards > 0) {\n\t\t\t\tconst placement = wildcardPlacement\n\t\t\t\tconst maxNodes = 2 ** i\n\t\t\t\tconst range1 = this.getWildcardRange(0, maxNodes / 2, numWildcards / 2, placement)\n\t\t\t\tconst range2 = this.getWildcardRange(maxNodes / 2, maxNodes, numWildcards / 2, placement)\n\t\t\t\tranges = [...range1, ...range2]\n\t\t\t}\n\n\t\t\tconst round = new Round(i + 1, `Round ${numRounds - i}`, i);\n\t\t\tconst maxMatches = 2 ** i\n\t\t\tconst matches: (MatchNode | null)[] = []\n\t\t\tfor (let x = 0; x < maxMatches; x++) {\n\t\t\t\tif (ranges.length > 0) {\n\t\t\t\t\t// check to see if x is in the range of any of the wildcard ranges\n\t\t\t\t\tconst inRange = ranges.some(range => {\n\t\t\t\t\t\treturn x >= range.min && x < range.max\n\t\t\t\t\t})\n\t\t\t\t\tif (!inRange) {\n\t\t\t\t\t\tmatches[x] = null\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// const parentIndex = Math.floor(x / 2)\n\t\t\t\t// const parent = rounds[i - 1].matches[parentIndex]\n\t\t\t\tconst parent = this.getParent(x, i, rounds)\n\t\t\t\tconst match = new MatchNode(parent, i)\n\t\t\t\tthis.assignMatchToParent(x, match, parent)\n\t\t\t\tmatches[x] = match\n\t\t\t}\n\t\t\tround.matches = matches\n\t\t\trounds[i] = round\n\t\t};\n\t\treturn rounds\n\t}\n\n\n\tstatic getWildcardRange(start: number, end: number, count: number, placement: WildcardPlacement): WildcardRange[] {\n\t\tswitch (placement) {\n\t\t\tcase WildcardPlacement.Top:\n\t\t\t\treturn [new WildcardRange(start, start + count)]\n\t\t\tcase WildcardPlacement.Bottom:\n\t\t\t\treturn [new WildcardRange(end - count, end)]\n\t\t\tcase WildcardPlacement.Center:\n\t\t\t\tconst offset = (end - start - count) / 2;\n\t\t\t\treturn [new WildcardRange(start + offset, end - offset)];\n\t\t\tcase WildcardPlacement.Split:\n\t\t\t\treturn [new WildcardRange(start, start + count / 2), new WildcardRange(end - count / 2, end)]\n\t\t}\n\t}\n\n\tclone(): MatchTree {\n\t\tconst tree = this\n\t\tconst newTree = new MatchTree()\n\t\t// First, create the new rounds.\n\t\tnewTree.rounds = tree.rounds.map((round) => {\n\t\t\tconst newRound = new Round(round.id, round.name, round.depth);\n\t\t\treturn newRound;\n\t\t});\n\t\t// Then, iterate over the new rounds to create the matches and update their parent relationships.\n\t\tnewTree.rounds.forEach((round, roundIndex) => {\n\t\t\tround.matches = tree.rounds[roundIndex].matches.map((match, matchIndex) => {\n\t\t\t\tif (match === null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst newMatch = match.clone();\n\t\t\t\tconst parent = MatchTree.getParent(matchIndex, roundIndex, newTree.rounds);\n\t\t\t\tnewMatch.parent = parent;\n\t\t\t\tMatchTree.assignMatchToParent(matchIndex, newMatch, parent);\n\t\t\t\treturn newMatch;\n\t\t\t});\n\t\t});\n\t\treturn newTree;\n\t}\n\n\tstatic fromBracketResponse(bracket: BracketRes): MatchTree {\n\t\tconst tree = new MatchTree()\n\t\ttree.rounds = bracket.rounds.map((round) => {\n\t\t\tconst newRound = new Round(round.id, round.name, round.depth);\n\t\t\treturn newRound;\n\t\t});\n\t\t// Then, iterate over the new rounds to create the matches and update their parent relationships.\n\t\ttree.rounds.forEach((round, roundIndex) => {\n\t\t\tround.matches = bracket.rounds[roundIndex].matches.map((match, matchIndex) => {\n\t\t\t\tif (match === null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst newMatch = new MatchNode(null, roundIndex);\n\t\t\t\tnewMatch.team1 = match.team1 ? new Team(match.team1.name) : null;\n\t\t\t\tnewMatch.team2 = match.team2 ? new Team(match.team2.name) : null;\n\t\t\t\tnewMatch.result = match.result ? new Team(match.result.name) : null;\n\t\t\t\tconst parent = this.getParent(matchIndex, roundIndex, tree.rounds);\n\t\t\t\tif (parent) {\n\t\t\t\t\tnewMatch.parent = parent;\n\t\t\t\t\tthis.assignMatchToParent(matchIndex, newMatch, parent);\n\t\t\t\t}\n\t\t\t\treturn newMatch;\n\t\t\t});\n\t\t});\n\t\treturn tree;\n\t}\n\n\ttoRequest(name: string, active: boolean, numRounds: number, numWildcards: number, wildcardPlacement: WildcardPlacement): BracketReq {\n\t\tconst tree = this;\n\t\tconst rounds = tree.rounds.map((round) => {\n\t\t\treturn round.toRequest();\n\t\t});\n\t\treturn {\n\t\t\trounds: rounds,\n\t\t\tname: name,\n\t\t\tactive: active,\n\t\t\tnumRounds: numRounds,\n\t\t\tnumWildcards: numWildcards,\n\t\t\twildcardPlacement: wildcardPlacement,\n\t\t}\n\t}\n\n\tadvanceTeam = (depth: number, matchIndex: number, left: boolean) => {\n\t\tconst match = this.rounds[depth].matches[matchIndex]\n\t\tif (!match) {\n\t\t\treturn\n\t\t}\n\t\tconst team = left ? match.team1 : match.team2\n\t\tif (!team) {\n\t\t\treturn\n\t\t}\n\t\tmatch.result = team\n\t\tconst parent = match.parent\n\t\tif (!parent) {\n\t\t\treturn\n\t\t}\n\t\tif (match === parent.left) {\n\t\t\tparent.team1 = team\n\t\t} else if (match === parent.right) {\n\t\t\tparent.team2 = team\n\t\t}\n\t}\n\n\t// \tnewTree.rounds = tree.rounds.map((round, i, rounds) => {\n\t// \t\tconst newRound = new Round(round.id, round.name, round.depth, round.roundNum)\n\t// \t\tconsole.log('i', i)\n\t// \t\tconsole.log('rounds', rounds)\n\t// \t\tnewRound.matches = round.matches.map((match, x, matches) => {\n\t// \t\t\tif (match === null) {\n\t// \t\t\t\treturn null\n\t// \t\t\t}\n\t// \t\t\tconst newMatch = match.clone()\n\t// \t\t\tconsole.log('x', x)\n\t// \t\t\tconsole.log('matches', matches)\n\t// \t\t\tconst parent = this.getParent(x, i, newTree.rounds)\n\t// \t\t\tnewMatch.parent = parent\n\t// \t\t\tthis.assignMatchToParent(x, newMatch, parent)\n\t// \t\t\treturn newMatch\n\t// \t\t})\n\t// \t\treturn newRound\n\t// \t})\n\t// \treturn newTree\n\t// }\n\n\tstatic getParent(matchIndex: number, roundIndex: number, rounds: Round[]): MatchNode | null {\n\t\tif (roundIndex === 0) {\n\t\t\treturn null\n\t\t}\n\t\tconst parentIndex = Math.floor(matchIndex / 2)\n\t\treturn rounds[roundIndex - 1].matches[parentIndex]\n\t}\n\n\tstatic assignMatchToParent(matchIndex: number, match: MatchNode, parent: MatchNode | null) {\n\t\tif (parent === null) {\n\t\t\treturn\n\t\t}\n\t\tif (matchIndex % 2 === 0) {\n\t\t\tparent.left = match\n\t\t} else {\n\t\t\tparent.right = match\n\t\t}\n\t}\n}\n\ninterface TeamSlotProps {\n\tclassName: string;\n\tteam?: Team | null;\n\tupdateTeam?: (name: string) => void;\n\tpickTeam?: () => void;\n}\n\nconst TeamSlot = (props: TeamSlotProps) => {\n\tconst [editing, setEditing] = useState(false)\n\tconst [textBuffer, setTextBuffer] = useState('')\n\n\tconst {\n\t\tteam,\n\t\tupdateTeam,\n\t\tpickTeam\n\t} = props\n\n\n\tconst startEditing = () => {\n\t\tif (!updateTeam) {\n\t\t\treturn\n\t\t}\n\t\tsetEditing(true)\n\t\tsetTextBuffer(team ? team.name : '')\n\t}\n\n\tconst doneEditing = (e) => {\n\t\tif (!updateTeam) {\n\t\t\treturn\n\t\t}\n\t\tif (!team && textBuffer !== '' || team && textBuffer !== team.name) {\n\t\t\tupdateTeam(textBuffer)\n\t\t}\n\t\tsetEditing(false)\n\t}\n\n\tconst handleClick = (e) => {\n\t\tif (updateTeam) {\n\t\t\tstartEditing()\n\t\t} else if (pickTeam) {\n\t\t\tpickTeam()\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={props.className} onClick={handleClick}>\n\t\t\t{editing ?\n\t\t\t\t<input\n\t\t\t\t\tclassName='wpbb-team-name-input'\n\t\t\t\t\tautoFocus\n\t\t\t\t\tonFocus={(e) => e.target.select()}\n\t\t\t\t\ttype='text'\n\t\t\t\t\tvalue={textBuffer}\n\t\t\t\t\tonChange={(e) => setTextBuffer(e.target.value)}\n\t\t\t\t\tonBlur={doneEditing}\n\t\t\t\t\tonKeyUp={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tdoneEditing(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t<span className='wpbb-team-name'>{team ? team.name : ''}</span>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\ninterface MatchBoxProps {\n\tmatch: MatchNode | null;\n\tdirection: Direction;\n\theight: number;\n\tspacing: number;\n\tupdateTeam?: (left: boolean, name: string) => void;\n\tpickTeam?: (left: boolean) => void;\n}\n\nconst MatchBox = (props: MatchBoxProps) => {\n\t// const match: MatchNode | null = props.match\n\t// const direction: Direction = props.direction\n\t// const height: number = props.height\n\t// const spacing: number = props.spacing\n\t// // const updateTeam = (roundId: number, matchIndex: number, left: boolean, name: string) => {\n\t// const updateTeam = props.updateTeam\n\tconst {\n\t\tmatch,\n\t\tdirection,\n\t\theight,\n\t\tspacing,\n\t\tupdateTeam,\n\t\tpickTeam,\n\t} = props\n\n\t// const updateTeam = (name: string, left: boolean) => {\n\t// \tconsole.log('updateTeam', name)\n\t// \t// updateTeam(match.roundId, match.matchIndex, left, name)\n\t// }\n\n\tif (match === null) {\n\t\treturn (\n\t\t\t<div className='wpbb-match-box-empty' style={{ height: height + spacing }} />\n\t\t)\n\t}\n\n\n\tlet className: string;\n\n\tif (direction === Direction.TopLeft || direction === Direction.BottomLeft) {\n\t\t// Left side of the bracket\n\t\tclassName = 'wpbb-match-box-left'\n\t} else {\n\t\t// Right side of the bracket\n\t\tclassName = 'wpbb-match-box-right'\n\t}\n\n\tconst upperOuter = match.left === null\n\tconst lowerOuter = match.right === null\n\n\tif (upperOuter && lowerOuter) {\n\t\t// First round\n\t\tclassName += '-outer'\n\t} else if (upperOuter) {\n\t\t// Upper bracket\n\t\tclassName += '-outer-upper'\n\t} else if (lowerOuter) {\n\t\t// Lower bracket\n\t\tclassName += '-outer-lower'\n\t}\n\n\t// This component renders the lines connecting two nodes representing a \"game\"\n\t// These should be evenly spaced in the column and grow according to the number of other matches in the round\n\treturn (\n\t\t<div className={className} style={{ height: height, marginBottom: spacing }}>\n\t\t\t<TeamSlot\n\t\t\t\tclassName='wpbb-team1'\n\t\t\t\tteam={match.team1}\n\t\t\t\tupdateTeam={updateTeam ? (name: string) => updateTeam(true, name) : undefined}\n\t\t\t\tpickTeam={pickTeam ? () => pickTeam(true) : undefined}\n\t\t\t/>\n\t\t\t<TeamSlot\n\t\t\t\tclassName='wpbb-team2'\n\t\t\t\tteam={match.team2}\n\t\t\t\tupdateTeam={updateTeam ? (name: string) => updateTeam(false, name) : undefined}\n\t\t\t\tpickTeam={pickTeam ? () => pickTeam(false) : undefined}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nconst Spacer = ({ grow = '1' }) => {\n\treturn (\n\t\t<div style={{ flexGrow: grow }} />\n\t)\n}\n\ninterface RoundHeaderProps {\n\tround: Round;\n\tupdateRoundName?: (roundId: number, name: string) => void;\n}\n\nconst RoundHeader = (props: RoundHeaderProps) => {\n\tconst [editRoundName, setEditRoundName] = useState(false);\n\tconst [nameBuffer, setNameBuffer] = useState('');\n\tconst {\n\t\tround,\n\t\tupdateRoundName,\n\t} = props\n\n\tconst canEdit = updateRoundName !== undefined\n\n\tuseEffect(() => {\n\t\tsetNameBuffer(props.round.name)\n\t}, [props.round.name])\n\n\tconst startEditing = () => {\n\t\tif (!canEdit) {\n\t\t\treturn\n\t\t}\n\t\tsetEditRoundName(true)\n\t\tsetNameBuffer(round.name)\n\t}\n\n\tconst doneEditing = () => {\n\t\tif (!canEdit) {\n\t\t\treturn\n\t\t}\n\t\tsetEditRoundName(false)\n\t\tupdateRoundName(props.round.id, nameBuffer)\n\t}\n\n\treturn (\n\t\t<div className='wpbb-round__header'>\n\t\t\t{editRoundName ? <Form.Control type='text'\n\t\t\t\tvalue={nameBuffer}\n\t\t\t\tautoFocus\n\t\t\t\tonFocus={(e) => e.target.select()}\n\t\t\t\tonBlur={() => doneEditing()}\n\t\t\t\tonChange={(e) => setNameBuffer(e.target.value)}\n\t\t\t\tonKeyUp={(e) => {\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\tdoneEditing()\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t\t:\n\t\t\t\t<span onClick={startEditing}>{round.name}</span>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nconst FinalRound = (props) => {\n\tconst round: Round = props.round;\n\tconst updateRoundName = props.updateRoundName;\n\treturn (\n\t\t<div className='wpbb-round'>\n\t\t\t<RoundHeader round={round} updateRoundName={updateRoundName} />\n\t\t\t<div className='wpbb-round__body'>\n\t\t\t\t<Spacer grow='2' />\n\t\t\t\t<div className='wpbb-final-match'>\n\t\t\t\t\t<TeamSlot className='wpbb-team1' />\n\t\t\t\t\t<TeamSlot className='wpbb-team2' />\n\t\t\t\t</div>\n\t\t\t\t<Spacer grow='2' />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\ninterface MatchColumnProps {\n\tround: Round;\n\tmatches: Nullable<MatchNode>[];\n\tdirection: Direction;\n\tnumDirections: number;\n\tmatchHeight: number;\n\tupdateRoundName?: (roundId: number, name: string) => void;\n\tupdateTeam?: (roundId: number, matchIndex: number, left: boolean, name: string) => void;\n\tpickTeam?: (matchIndes: number, left: boolean) => void;\n}\n\nconst MatchColumn = (props: MatchColumnProps) => {\n\tconst {\n\t\tround,\n\t\tmatches,\n\t\tdirection,\n\t\tnumDirections,\n\t\tmatchHeight,\n\t\tupdateRoundName,\n\t\tupdateTeam,\n\t\tpickTeam,\n\t} = props\n\t// const updateTeam = (roundId: number, matchIndex: number, left: boolean, name: string) => {\n\tconst canEdit = updateTeam !== undefined && updateRoundName !== undefined\n\n\tconst buildMatches = () => {\n\t\tconst matchBoxes = matches.map((match, i) => {\n\t\t\tconst matchIndex = direction === Direction.TopLeft || direction === Direction.BottomLeft ? i : i + matches.length\n\t\t\treturn (\n\t\t\t\t<MatchBox\n\t\t\t\t\tmatch={match}\n\t\t\t\t\tdirection={direction}\n\t\t\t\t\theight={matchHeight}\n\t\t\t\t\tspacing={i + 1 < matches.length ? matchHeight : 0} // Do not add spacing to the last match in the round column\n\t\t\t\t\tupdateTeam={canEdit ? (left: boolean, name: string) => updateTeam(round.id, matchIndex, left, name) : undefined}\n\t\t\t\t\tpickTeam={pickTeam ? (left: boolean) => pickTeam(matchIndex, left) : undefined}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t\treturn matchBoxes\n\n\t}\n\treturn (\n\t\t<div className='wpbb-round'>\n\t\t\t<RoundHeader round={round} updateRoundName={canEdit ? updateRoundName : undefined} />\n\t\t\t<div className='wpbb-round__body'>\n\t\t\t\t{buildMatches()}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nconst NumRoundsSelector = (props) => {\n\tconst {\n\t\tnumRounds,\n\t\tsetNumRounds\n\t} = props\n\n\tconst minRounds = 1;\n\tconst maxRounds = 6;\n\n\tconst options = Array.from(Array(maxRounds - minRounds + 1).keys()).map((i) => {\n\t\treturn (\n\t\t\t<option value={i + minRounds}>{i + minRounds}</option>\n\t\t)\n\t})\n\n\tconst handleChange = (event) => {\n\t\tconst num = event.target.value\n\t\tsetNumRounds(parseInt(num))\n\t}\n\n\treturn (\n\t\t<div className='wpbb-option-group'>\n\t\t\t<label>\n\t\t\t\tNumber of Rounds:\n\t\t\t</label>\n\t\t\t<select value={numRounds} onChange={handleChange}>\n\t\t\t\t{options}\n\t\t\t</select>\n\t\t</div>\n\t)\n}\n\nconst NumWildcardsSelector = (props) => {\n\tconst {\n\t\tnumWildcards,\n\t\tsetNumWildcards,\n\t\tmaxWildcards,\n\t} = props\n\n\tconst minWildcards = 0;\n\n\t// Number of wildcards must be an even number or 0\n\tlet options = [\n\t\t<option value={0}>0</option>\n\t]\n\toptions = [...options, ...Array.from(Array(maxWildcards / 2).keys()).reverse().map((i) => {\n\t\treturn (\n\t\t\t<option value={(i + 1) * 2}>{(i + 1) * 2}</option>\n\t\t)\n\t})]\n\n\tconst handleChange = (event) => {\n\t\tconst num = event.target.value\n\t\tsetNumWildcards(parseInt(num))\n\t}\n\n\treturn (\n\t\t<div className='wpbb-option-group'>\n\t\t\t<label>\n\t\t\t\tWildcard Games:\n\t\t\t</label>\n\t\t\t<select value={numWildcards} onChange={handleChange}>\n\t\t\t\t{options}\n\t\t\t</select>\n\t\t</div>\n\t)\n}\n\ninterface WildcardPlacementSelectorProps {\n\twildcardPlacement: WildcardPlacement;\n\tsetWildcardPlacement: (wildcardPlacement: WildcardPlacement) => void;\n\tdisabled: boolean;\n}\n\nconst WildcardPlacementSelector = (props: WildcardPlacementSelectorProps) => {\n\tconst {\n\t\twildcardPlacement,\n\t\tsetWildcardPlacement,\n\t\tdisabled,\n\t} = props\n\n\tconst options = [\n\t\t<option value={WildcardPlacement.Bottom}>Bottom</option>,\n\t\t<option value={WildcardPlacement.Top}>Top</option>,\n\t\t<option value={WildcardPlacement.Split}>Split</option>,\n\t\t<option value={WildcardPlacement.Center}>Centered</option>,\n\t]\n\n\tconst handleChange = (event) => {\n\t\tconst num = event.target.value\n\t\tsetWildcardPlacement(parseInt(num))\n\t}\n\n\treturn (\n\t\t<div className='wpbb-option-group'>\n\t\t\t<label>\n\t\t\t\tWildcard Placement:\n\t\t\t</label>\n\t\t\t<select value={wildcardPlacement} onChange={handleChange} disabled={disabled}>\n\t\t\t\t{options}\n\t\t\t</select>\n\t\t</div>\n\t)\n}\n\nconst BracketTitle = (props) => {\n\tconst {\n\t\ttitle,\n\t\tsetTitle,\n\t} = props\n\tconst [editing, setEditing] = useState(false)\n\tconst [textBuffer, setTextBuffer] = useState(title)\n\n\tconst startEditing = () => {\n\t\tsetEditing(true)\n\t\tsetTextBuffer(title)\n\t}\n\n\tconst doneEditing = (event) => {\n\t\tsetTitle(textBuffer)\n\t\tsetEditing(false)\n\t}\n\n\treturn (\n\t\t<div className='wpbb-bracket-title' onClick={startEditing}>\n\t\t\t{editing ?\n\t\t\t\t<input\n\t\t\t\t\tclassName='wpbb-bracket-title-input'\n\t\t\t\t\tautoFocus\n\t\t\t\t\tonFocus={(e) => e.target.select()}\n\t\t\t\t\ttype='text'\n\t\t\t\t\tvalue={textBuffer}\n\t\t\t\t\tonChange={(e) => setTextBuffer(e.target.value)}\n\t\t\t\t\tonBlur={doneEditing}\n\t\t\t\t\tonKeyUp={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tdoneEditing(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t<span className='wpbb-bracket-title-name'>{title}</span>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\n\ninterface BracketProps {\n\tmatchTree: MatchTree;\n\tcanEdit?: boolean;\n\tcanPick?: boolean;\n\tsetMatchTree: (matchTree: MatchTree) => void;\n}\n\nconst Bracket = (props: BracketProps) => {\n\t// const { numRounds, numWildcards, wildcardPlacement } = props\n\t// const [matchTree, setMatchTree] = useState<MatchTree>(MatchTree.fromOptions(numRounds, numWildcards, wildcardPlacement))\n\tconst {\n\t\tmatchTree,\n\t\tsetMatchTree,\n\t\tcanEdit,\n\t\tcanPick,\n\t} = props\n\n\tconst rounds = matchTree.rounds\n\t// const canEdit = setMatchTree !== undefined\n\n\n\tconst updateRoundName = (roundId: number, name: string) => {\n\t\tif (!canEdit) {\n\t\t\treturn\n\t\t}\n\t\tconst newMatchTree = matchTree.clone();\n\t\tconst roundToUpdate = newMatchTree.rounds.find((round) => round.id === roundId);\n\t\tif (roundToUpdate) {\n\t\t\troundToUpdate.name = name;\n\t\t\tsetMatchTree(newMatchTree);\n\t\t}\n\t};\n\n\tconst updateTeam = (roundId: number, matchIndex: number, left: boolean, name: string) => {\n\t\tif (!canEdit) {\n\t\t\treturn\n\t\t}\n\t\tconst newMatchTree = matchTree.clone();\n\t\tconst roundToUpdate = newMatchTree.rounds.find((round) => round.id === roundId);\n\t\tif (roundToUpdate) {\n\t\t\tconst matchToUpdate = roundToUpdate.matches[matchIndex];\n\t\t\tif (matchToUpdate) {\n\t\t\t\tif (left) {\n\t\t\t\t\tconst team = matchToUpdate.team1;\n\t\t\t\t\tif (team) {\n\t\t\t\t\t\tteam.name = name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatchToUpdate.team1 = new Team(name);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst team = matchToUpdate.team2;\n\t\t\t\t\tif (team) {\n\t\t\t\t\t\tteam.name = name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatchToUpdate.team2 = new Team(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetMatchTree(newMatchTree);\n\t\t}\n\t}\n\n\tconst pickTeam = (depth: number, matchIndex: number, left: boolean) => {\n\t\tconsole.log('pickTeam', depth, matchIndex, left)\n\t\tconst newMatchTree = matchTree.clone()\n\t\tnewMatchTree.advanceTeam(depth, matchIndex, left)\n\t\tsetMatchTree(newMatchTree)\n\t}\n\n\tconst targetHeight = 800;\n\n\t// The number of rounds sets the initial height of each match\n\t// const firstRoundMatchHeight = targetHeight / rounds.length / 2;\n\tconst firstRoundMatchHeight = targetHeight / 2 ** (rounds.length - 2) / 2;\n\n\t/**\n\t * Build rounds in two directions, left to right and right to left\n\t */\n\tconst buildRounds2 = (rounds: Round[]) => {\n\t\t// Assume rounds are sorted by depth\n\t\t// Rendering from left to right, sort by depth descending\n\t\tconst numDirections = 2\n\n\t\treturn [\n\t\t\t...rounds.slice(1).reverse().map((round, idx) => {\n\t\t\t\t// Get the first half of matches for this column\n\t\t\t\tconst colMatches = round.matches.slice(0, round.matches.length / 2)\n\n\t\t\t\treturn <MatchColumn\n\t\t\t\t\tmatches={colMatches}\n\t\t\t\t\tround={round} direction={Direction.TopLeft}\n\t\t\t\t\tnumDirections={numDirections}\n\t\t\t\t\tmatchHeight={2 ** idx * firstRoundMatchHeight}\n\t\t\t\t\tupdateRoundName={canEdit ? updateRoundName : undefined}\n\t\t\t\t\tupdateTeam={canEdit ? updateTeam : undefined}\n\t\t\t\t\tpickTeam={canPick ?\n\t\t\t\t\t\t(matchIndex: number, left: boolean) => pickTeam(round.depth, matchIndex, left)\n\t\t\t\t\t\t: undefined}\n\t\t\t\t/>\n\t\t\t}),\n\t\t\t// handle final round differently\n\t\t\t<FinalRound round={rounds[0]} updateRoundName={updateRoundName} />,\n\t\t\t...rounds.slice(1).map((round, idx, arr) => {\n\t\t\t\t// Get the second half of matches for this column\n\t\t\t\tconst colMatches = round.matches.slice(round.matches.length / 2)\n\n\t\t\t\treturn <MatchColumn round={round}\n\t\t\t\t\tmatches={colMatches}\n\t\t\t\t\tdirection={Direction.TopRight}\n\t\t\t\t\tnumDirections={numDirections}\n\t\t\t\t\tmatchHeight={2 ** (arr.length - 1 - idx) * firstRoundMatchHeight}\n\t\t\t\t\tupdateRoundName={canEdit ? updateRoundName : undefined}\n\t\t\t\t\tupdateTeam={canEdit ? updateTeam : undefined}\n\t\t\t\t\tpickTeam={canPick ?\n\t\t\t\t\t\t(matchIndex: number, left: boolean) => pickTeam(round.depth, matchIndex, left)\n\t\t\t\t\t\t: undefined}\n\t\t\t\t/>\n\t\t\t})\n\t\t]\n\t}\n\n\treturn (\n\t\t<div className='wpbb-bracket'>\n\t\t\t{rounds.length > 0 && buildRounds2(rounds)}\n\t\t</div>\n\t)\n}\n\nexport enum BracketModalMode {\n\tNew = 0,\n\tView = 1,\n\tScore = 2,\n}\n\nconst ViewBracketModal = (props) => {\n\tconst {\n\t\tshow,\n\t\thandleClose,\n\t\tbracketId\n\t} = props;\n\tconst [matchTree, setMatchTree] = useState<MatchTree | null>(null)\n\tconst [bracket, setBracket] = useState<BracketRes | null>(null)\n\n\tuseEffect(() => {\n\t\tbracketApi.getBracket(bracketId)\n\t\t\t.then((bracket) => {\n\t\t\t\tsetBracket(bracket)\n\t\t\t\tsetMatchTree(MatchTree.fromBracketResponse(bracket))\n\t\t\t})\n\t}, [bracketId])\n\n\treturn (\n\t\t<Modal className='wpbb-bracket-modal' show={show && bracket} onHide={handleClose} size='xl' centered={true}>\n\t\t\t<Modal.Header className='wpbb-bracket-modal__header' closeButton>\n\t\t\t\t<Modal.Title>{bracket?.name}</Modal.Title>\n\t\t\t</Modal.Header >\n\t\t\t<Modal.Body className='pt-0'>\n\t\t\t\t{matchTree ? <Bracket matchTree={matchTree} setMatchTree={setMatchTree} canPick /> : 'Loading...'}\n\t\t\t</Modal.Body>\n\t\t\t<Modal.Footer className='wpbb-bracket-modal__footer'>\n\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\n\t\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t)\n}\n\ninterface NewBracketModalProps {\n\tshow: boolean;\n\thandleClose: () => void;\n\thandleSave: (bracket: BracketRes) => void;\n\tbracketId: Nullable<number>;\n}\n\nconst NewBracketModal = (props: NewBracketModalProps) => {\n\tconst defaultNumRounds = 4;\n\tconst defaultNumWildcards = 0;\n\tconst defaultWildcardPlacement = WildcardPlacement.Bottom;\n\tconst defaultBracketName = 'New Bracket';\n\tconst {\n\t\tshow,\n\t\thandleClose,\n\t\thandleSave,\n\t\tbracketId\n\t} = props;\n\tconst [numRounds, setNumRounds] = useState(defaultNumRounds);\n\tconst [numWildcards, setNumWildcards] = useState(defaultNumWildcards);\n\tconst [wildcardPlacement, setWildcardPlacement] = useState(defaultWildcardPlacement);\n\tconst [bracketName, setBracketName] = useState(defaultBracketName);\n\tconst [matchTree, setMatchTree] = useState<MatchTree>(MatchTree.fromOptions(defaultNumRounds, defaultNumWildcards, defaultWildcardPlacement));\n\t// The max number of wildcards is 2 less than the possible number of matches in the first round\n\tconst maxWildcards = 2 ** (numRounds - 1) - 2;\n\n\tuseEffect(() => {\n\t\tconsole.log('bracketId', bracketId)\n\t\tif (bracketId) {\n\t\t\tbracketApi.getBracket(bracketId)\n\t\t\t\t.then((bracket) => {\n\t\t\t\t\tsetNumRounds(bracket.numRounds)\n\t\t\t\t\tsetNumWildcards(bracket.numWildcards)\n\t\t\t\t\tif (bracket.wildcardPlacement) {\n\t\t\t\t\t\tsetWildcardPlacement(bracket.wildcardPlacement)\n\t\t\t\t\t}\n\t\t\t\t\tsetBracketName(`${bracket.name} (Copy)`)\n\t\t\t\t\tsetMatchTree(MatchTree.fromBracketResponse(bracket))\n\t\t\t\t})\n\t\t}\n\t\telse {\n\t\t\trebuildMatchTree(defaultNumRounds, defaultNumWildcards, defaultWildcardPlacement);\n\t\t}\n\t}, [bracketId])\n\n\tconst updateNumRounds = (num: number) => {\n\t\tsetNumRounds(num);\n\t\trebuildMatchTree(num, numWildcards, wildcardPlacement);\n\t};\n\n\tconst updateNumWildcards = (num: number) => {\n\t\tsetNumWildcards(num);\n\t\trebuildMatchTree(numRounds, num, wildcardPlacement);\n\t};\n\n\tconst updateWildcardPlacement = (placement: WildcardPlacement) => {\n\t\tsetWildcardPlacement(placement);\n\t\trebuildMatchTree(numRounds, numWildcards, placement);\n\t};\n\n\tconst rebuildMatchTree = (\n\t\tupdatedNumRounds: number,\n\t\tupdatedNumWildcards: number,\n\t\tupdatedWildcardPlacement: WildcardPlacement\n\t) => {\n\t\tsetMatchTree(MatchTree.fromOptions(updatedNumRounds, updatedNumWildcards, updatedWildcardPlacement));\n\t};\n\n\tconst handleSaveBracket = () => {\n\t\tconst req = matchTree.toRequest(bracketName, true, numRounds, numWildcards, wildcardPlacement)\n\t\tbracketApi.createBracket(req)\n\t\t\t.then((newBracket) => {\n\t\t\t\thandleSave(newBracket)\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<Modal className='wpbb-bracket-modal' show={show} onHide={handleClose} size='xl' centered={true}>\n\t\t\t<Modal.Header className='wpbb-bracket-modal__header' closeButton>\n\t\t\t\t<Modal.Title><BracketTitle title={bracketName} setTitle={setBracketName} /></Modal.Title>\n\t\t\t\t<form className='wpbb-options-form'>\n\t\t\t\t\t<NumRoundsSelector\n\t\t\t\t\t\tnumRounds={numRounds}\n\t\t\t\t\t\tsetNumRounds={updateNumRounds}\n\t\t\t\t\t/>\n\t\t\t\t\t<NumWildcardsSelector\n\t\t\t\t\t\tnumWildcards={numWildcards}\n\t\t\t\t\t\tsetNumWildcards={updateNumWildcards}\n\t\t\t\t\t\tmaxWildcards={maxWildcards}\n\t\t\t\t\t/>\n\t\t\t\t\t<WildcardPlacementSelector\n\t\t\t\t\t\twildcardPlacement={wildcardPlacement}\n\t\t\t\t\t\tsetWildcardPlacement={updateWildcardPlacement}\n\t\t\t\t\t\tdisabled={numWildcards > 0 ? false : true}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</Modal.Header >\n\t\t\t<Modal.Body className='pt-0'><Bracket matchTree={matchTree} setMatchTree={setMatchTree} canEdit /></Modal.Body>\n\t\t\t<Modal.Footer className='wpbb-bracket-modal__footer'>\n\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\n\t\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"primary\" onClick={handleSaveBracket}>\n\t\t\t\t\tSave\n\t\t\t\t</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t)\n}\n\ninterface BracketModalProps {\n\tshow: boolean;\n\thandleClose: () => void;\n\thandleSave: (bracket: BracketRes) => void;\n\tmode: BracketModalMode;\n\tbracketId: Nullable<number>;\n}\n\n\nexport const BracketModal = (props: BracketModalProps) => {\n\tconst bracketId = props.bracketId;\n\n\tif (bracketId) {\n\t\tif (props.mode === BracketModalMode.New) {\n\t\t\treturn <NewBracketModal {...props} />\n\t\t} else if (props.mode === BracketModalMode.Score) {\n\t\t\treturn <ViewBracketModal {...props} />\n\t\t} else {\n\t\t\treturn <ViewBracketModal {...props} />\n\t\t}\n\t} else {\n\t\treturn <NewBracketModal {...props} />\n\t}\n}\n","import React, { useState, useEffect } from 'react';\nimport { Container, Button, Table, Modal } from 'react-bootstrap';\nimport { BracketModal, BracketModalMode } from '../bracket_builder/Bracket';\nimport { BracketRes, bracketApi } from '../../api/bracketApi';\n\ninterface DeleteModalProps {\n\tshow: boolean;\n\tonHide: () => void;\n\tonDelete: () => void;\n}\n\nconst DeleteModal: React.FC<DeleteModalProps> = ({ show, onHide, onDelete }) => {\n\treturn (\n\t\t<Modal show={show} onHide={onHide} centered={true}>\n\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title>Delete Bracket</Modal.Title>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body>\n\t\t\t\t<p>\n\t\t\t\t\tAre you sure you want to delete this bracket? This will delete all associated user brackets and cannot be undone.\n\t\t\t\t</p>\n\t\t\t</Modal.Body>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Button variant=\"secondary\" onClick={onHide}>\n\t\t\t\t\tCancel\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"danger\" onClick={onDelete}>\n\t\t\t\t\tDelete\n\t\t\t\t</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\n\ninterface BracketRowProps {\n\tbracket: BracketRes;\n\t// handleViewBracket: (bracketId: number) => void;\n\thandleShowBracketModal: (mode: BracketModalMode, bracketId: number | null) => void;\n\thandleDeleteBracket: (bracketId: number) => void;\n}\n\nconst BracketRow: React.FC<BracketRowProps> = (props) => {\n\tconst [showDeleteModal, setShowDeleteModal] = useState(false);\n\tconst [active, setActive] = useState<boolean>(props.bracket.active);\n\tconst bracket: BracketRes = props.bracket;\n\n\tconst handleViewBracket = () => {\n\t\tprops.handleShowBracketModal(BracketModalMode.View, bracket.id);\n\t}\n\n\tconst handleCopyBracket = (e) => {\n\t\te.stopPropagation();\n\t\tprops.handleShowBracketModal(BracketModalMode.New, bracket.id)\n\t}\n\n\tconst handleShowDeleteDialog = (e) => {\n\t\te.stopPropagation();\n\t\tsetShowDeleteModal(true);\n\t}\n\n\tconst handleActiveToggle = (e) => {\n\t\te.stopPropagation();\n\t\tconsole.log('toggle')\n\t\tbracketApi.setActive(bracket.id, e.target.checked).then((isActive) => {\n\t\t\tsetActive(isActive);\n\t\t})\n\t\tconsole.log(e.target.checked)\n\t}\n\tconst created = new Date(bracket.createdAt.date);\n\n\tconst timeAgo = (date: Date) => {\n\t\tconst now = new Date();\n\n\t\tconst diff = now.getTime() - date.getTime();\n\t\tconst days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\t\tif (days > 0) {\n\t\t\treturn `${days} day${days > 1 ? 's' : ''} ago`;\n\t\t}\n\t\tconst hours = Math.floor(diff / (1000 * 60 * 60));\n\t\tif (hours > 0) {\n\t\t\treturn `${hours} hour${hours > 1 ? 's' : ''} ago`;\n\t\t}\n\t\tconst minutes = Math.floor(diff / (1000 * 60));\n\t\tif (minutes > 0) {\n\t\t\treturn `${minutes} minute${minutes > 1 ? 's' : ''} ago`;\n\t\t}\n\t\tconst seconds = Math.floor(diff / (1000));\n\t\tif (seconds > 0) {\n\t\t\treturn `${seconds} second${seconds > 1 ? 's' : ''} ago`;\n\t\t}\n\t\treturn 'just now';\n\t};\n\n\tconst creationTime = timeAgo(created);\n\n\treturn (\n\t\t<>\n\t\t\t<tr onClick={handleViewBracket}>\n\t\t\t\t<td>{bracket.name}</td>\n\t\t\t\t<td className='text-center'>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={active}\n\t\t\t\t\t\tonClick={handleActiveToggle}\n\t\t\t\t\t/>\n\t\t\t\t</td>\n\t\t\t\t{/* <td className='text-center'>{bracket.userBracketCount}</td> */}\n\t\t\t\t<td className='text-center'>{creationTime}</td>\n\t\t\t\t<td className='text-center'>{bracket.numSubmissions}</td>\n\t\t\t\t<td className='wpbb-bracket-table-action-col'>\n\t\t\t\t\t<Button variant=\"primary\" >Score</Button>\n\t\t\t\t\t<Button variant=\"success\" className='mx-2' onClick={handleCopyBracket}>Copy</Button>\n\t\t\t\t\t<Button variant=\"danger\" onClick={handleShowDeleteDialog}>Delete</Button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<DeleteModal\n\t\t\t\tshow={showDeleteModal}\n\t\t\t\tonHide={() => setShowDeleteModal(false)}\n\t\t\t\tonDelete={() => props.handleDeleteBracket(bracket.id)}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\n\ninterface BracketTableProps {\n\tbrackets: BracketRes[];\n\thandleShowBracketModal: (mode: BracketModalMode, bracketId: number | null) => void;\n\thandleDeleteBracket: (bracketId: number) => void;\n}\n\nconst BracketTable: React.FC<BracketTableProps> = (props) => {\n\tconst brackets: BracketRes[] = props.brackets;\n\n\treturn (\n\t\t<Table hover className='table-dark wpbb-bracket-table'>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"col\">Name</th>\n\t\t\t\t\t<th scope=\"col\" className='text-center'>Published</th>\n\t\t\t\t\t<th scope=\"col\" className='text-center'>Created</th>\n\t\t\t\t\t<th scope=\"col\" className='text-center'>Submissions</th>\n\t\t\t\t\t<th scope=\"col\"></th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{brackets.map((bracket) => (\n\t\t\t\t\t<BracketRow\n\t\t\t\t\t\tkey={bracket.id}\n\t\t\t\t\t\tbracket={bracket}\n\t\t\t\t\t\t// handleViewBracket={handleViewBracket}\n\t\t\t\t\t\t// handleDeleteBracket={props.handleDeleteBracket}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</Table>\n\t);\n};\n\n\n\nconst Settings = () => {\n\tconst [showBracketModal, setShowBracketModal] = useState(false)\n\tconst [brackets, setBrackets] = useState<BracketRes[]>([]);\n\tconst [bracketModalMode, setBracketModalMode] = useState<BracketModalMode>(BracketModalMode.View);\n\tconst [activeBracketId, setActiveBracketId] = useState<number | null>(null);\n\n\tconst handleCloseBracketModal = () => {\n\t\tsetActiveBracketId(null);\n\t\tsetShowBracketModal(false);\n\t}\n\tconst handleSaveBracketModal = (newBracket: BracketRes) => {\n\t\tsetBrackets([...brackets, newBracket])\n\t\thandleCloseBracketModal();\n\t}\n\tconst handleShowBracketModal = (mode: BracketModalMode, bracketId: number | null = null) => {\n\t\tsetActiveBracketId(bracketId);\n\t\tsetBracketModalMode(mode);\n\t\tsetShowBracketModal(true);\n\t};\n\tconst handleDeleteBracket = (bracketId: number) => {\n\t\tbracketApi.deleteBracket(bracketId).then(() => {\n\t\t\tsetBrackets(brackets.filter((bracket) => bracket.id !== bracketId));\n\t\t})\n\t}\n\t// const handleCopyBracket = (bracketId: number) => {\n\t// \tbracketApi.(bracketId).then((bracket) => {\n\n\tuseEffect(() => {\n\t\tbracketApi.getBrackets().then((brackets) => {\n\t\t\tconsole.log(brackets);\n\t\t\tsetBrackets(brackets);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<Container >\n\t\t\t<h2 className='mt-4 mb-4'>Bracket Builder</h2>\n\t\t\t{/* <BracketList brackets={brackets} /> */}\n\t\t\t<BracketTable\n\t\t\t\tbrackets={brackets}\n\t\t\t\thandleShowBracketModal={handleShowBracketModal}\n\t\t\t\thandleDeleteBracket={handleDeleteBracket}\n\t\t\t/>\n\t\t\t<Button variant='dark' className='mt-6' onClick={() => handleShowBracketModal(BracketModalMode.New)}>New Bracket</Button>\n\t\t\t<BracketModal\n\t\t\t\tshow={showBracketModal}\n\t\t\t\tmode={bracketModalMode}\n\t\t\t\tbracketId={activeBracketId}\n\t\t\t\thandleClose={handleCloseBracketModal}\n\t\t\t\thandleSave={handleSaveBracketModal}\n\t\t\t/>\n\t\t</Container>\n\t);\n}\n\nexport default Settings; ","export enum WildcardPlacement {\n\tTop = 0,\n\tBottom = 1,\n\tCenter = 2,\n\tSplit = 3,\n}"],"names":["BracketApi","bracketPath","constructor","baseUrl","wpbb_ajax_obj","rest_url","getBrackets","res","performRequest","status","Error","camelCaseKeys","json","getBracket","id","createBracket","bracket","deleteBracket","console","log","setActive","active","path","activated","method","body","arguments","length","undefined","request","headers","JSON","stringify","snakeCaseKeys","fetch","toCamelCase","str","replace","group","toUpperCase","obj","Array","isArray","map","value","Object","entries","reduce","accumulator","_ref","key","camelCaseToSnakeCase","match","toLowerCase","_ref2","bracketApi","React","useState","useEffect","Button","Modal","Form","WildcardPlacement","Direction","Team","seed","name","clone","toRequest","MatchNode","team1","team2","result","left","right","parent","depth","index","Round","round","matches","i","WildcardRange","min","max","toString","MatchTree","fromOptions","numRounds","numWildcards","wildcardPlacement","tree","rounds","buildRounds","rootMatch","finalRound","ranges","placement","maxNodes","range1","getWildcardRange","range2","maxMatches","x","inRange","some","range","getParent","assignMatchToParent","start","end","count","Top","Bottom","Center","offset","Split","newTree","newRound","forEach","roundIndex","matchIndex","newMatch","fromBracketResponse","advanceTeam","team","parentIndex","Math","floor","TeamSlot","props","editing","setEditing","textBuffer","setTextBuffer","updateTeam","pickTeam","startEditing","doneEditing","e","handleClick","createElement","className","onClick","autoFocus","onFocus","target","select","type","onChange","onBlur","onKeyUp","MatchBox","direction","height","spacing","style","TopLeft","BottomLeft","upperOuter","lowerOuter","marginBottom","Spacer","grow","flexGrow","RoundHeader","editRoundName","setEditRoundName","nameBuffer","setNameBuffer","updateRoundName","canEdit","Control","FinalRound","MatchColumn","numDirections","matchHeight","buildMatches","matchBoxes","NumRoundsSelector","setNumRounds","minRounds","maxRounds","options","from","keys","handleChange","event","num","parseInt","NumWildcardsSelector","setNumWildcards","maxWildcards","minWildcards","reverse","WildcardPlacementSelector","setWildcardPlacement","disabled","BracketTitle","title","setTitle","Bracket","matchTree","setMatchTree","canPick","roundId","newMatchTree","roundToUpdate","find","matchToUpdate","targetHeight","firstRoundMatchHeight","buildRounds2","slice","idx","colMatches","arr","TopRight","BracketModalMode","ViewBracketModal","show","handleClose","bracketId","setBracket","then","onHide","size","centered","Header","closeButton","Title","Body","Footer","variant","NewBracketModal","defaultNumRounds","defaultNumWildcards","defaultWildcardPlacement","defaultBracketName","handleSave","bracketName","setBracketName","rebuildMatchTree","updateNumRounds","updateNumWildcards","updateWildcardPlacement","updatedNumRounds","updatedNumWildcards","updatedWildcardPlacement","handleSaveBracket","req","newBracket","BracketModal","mode","New","Score","Container","Table","DeleteModal","onDelete","BracketRow","showDeleteModal","setShowDeleteModal","handleViewBracket","handleShowBracketModal","View","handleCopyBracket","stopPropagation","handleShowDeleteDialog","handleActiveToggle","checked","isActive","created","Date","createdAt","date","timeAgo","now","diff","getTime","days","hours","minutes","seconds","creationTime","Fragment","numSubmissions","handleDeleteBracket","BracketTable","brackets","hover","scope","_extends","Settings","showBracketModal","setShowBracketModal","setBrackets","bracketModalMode","setBracketModalMode","activeBracketId","setActiveBracketId","handleCloseBracketModal","handleSaveBracketModal","filter"],"sourceRoot":""}